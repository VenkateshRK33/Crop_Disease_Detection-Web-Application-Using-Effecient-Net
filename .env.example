# ============================================
# KrishiRaksha - Farmer Platform
# Environment Configuration Template
# ============================================
#
# SETUP INSTRUCTIONS:
# 1. Copy this file to .env: cp .env.example .env
# 2. Update all values marked as REQUIRED
# 3. Configure optional services as needed
# 4. Never commit .env file to version control
#
# ============================================

# --------------------------------------------
# Backend Server Configuration
# --------------------------------------------

# Port for the Node.js Express backend server
# Default: 4000
# The React frontend is configured to proxy requests to this port
PORT=4000

# Node environment (development, production, test)
# Default: development
# IMPORTANT: Set to 'production' for deployment
NODE_ENV=development

# --------------------------------------------
# MongoDB Database Configuration
# --------------------------------------------

# MongoDB connection string (REQUIRED)
# 
# LOCAL DEVELOPMENT:
# mongodb://localhost:27017/krishiraksha-db
#
# PRODUCTION (MongoDB Atlas):
# mongodb+srv://<username>:<password>@<cluster>.mongodb.net/krishiraksha-db?retryWrites=true&w=majority
#
# SETUP INSTRUCTIONS:
# 1. For local: Install MongoDB and start service
# 2. For Atlas: Create cluster at https://www.mongodb.com/cloud/atlas
# 3. Create database user with read/write permissions
# 4. Whitelist your IP address or use 0.0.0.0/0 for development
# 5. Replace <username>, <password>, and <cluster> with your values
#
MONGODB_URI=mongodb://localhost:27017/krishiraksha-db

# --------------------------------------------
# ML Service Configuration
# --------------------------------------------

# URL for the Python FastAPI ML service (REQUIRED)
# Default: http://localhost:5000
# This service handles plant disease prediction using EfficientNet
#
# SETUP INSTRUCTIONS:
# 1. Ensure Python 3.8+ is installed
# 2. Install dependencies: pip install -r requirements_ml.txt
# 3. Start ML service: python api_service.py
# 4. Service should be running on port 5000
#
ML_API_URL=http://localhost:5000

# --------------------------------------------
# Ollama LLM Configuration
# --------------------------------------------

# URL for the Ollama service (local LLM inference)
# Default: http://localhost:11434
# Ollama must be installed and running locally
#
# SETUP INSTRUCTIONS:
# 1. Install Ollama from https://ollama.ai
# 2. Download model: ollama pull minimax-m2:cloud
# 3. Start Ollama service (usually auto-starts)
# 4. Verify: curl http://localhost:11434/api/tags
#
OLLAMA_URL=http://localhost:11434

# Ollama model to use for chat responses
# Options: minimax-m2:cloud, llama2, mistral, codellama, etc.
# Default: minimax-m2:cloud
# Note: Model must be downloaded first using: ollama pull <model-name>
OLLAMA_MODEL=minimax-m2:cloud

# --------------------------------------------
# Weather & Environmental API Configuration
# --------------------------------------------

# OpenWeatherMap API Key (REQUIRED for Environmental Monitoring)
# Sign up at: https://openweathermap.org/api
# Free tier: 1000 calls/day, 60 calls/minute
#
# SETUP INSTRUCTIONS:
# 1. Create account at https://openweathermap.org/api
# 2. Navigate to API Keys section
# 3. Generate new API key (activation takes ~2 hours)
# 4. Copy key and paste below
#
# FEATURES ENABLED:
# - Current weather data
# - 7-day weather forecast
# - Air Quality Index (AQI)
# - Temperature and humidity trends
#
WEATHER_API_KEY=your_openweathermap_api_key_here

# Agromonitoring API Key (OPTIONAL - for advanced soil data)
# Sign up at: https://agromonitoring.com/api
# Free tier: 1000 calls/day
# Leave empty to skip soil moisture data
AGRO_API_KEY=

# --------------------------------------------
# Market Prices Configuration (OPTIONAL)
# --------------------------------------------

# Market prices data source
# Options: 'mock' (default), 'agmarknet', 'custom'
# Default: mock (uses realistic mock data)
MARKET_DATA_SOURCE=mock

# AGMARKNET API Configuration (if using real data)
# Government of India agricultural market data
# Contact: https://agmarknet.gov.in for API access
# AGMARKNET_API_KEY=
# AGMARKNET_API_URL=

# --------------------------------------------
# Security & Authentication
# --------------------------------------------

# Session secret for JWT tokens (REQUIRED for production)
# Generate a strong random string (32+ characters)
# Example: openssl rand -base64 32
# IMPORTANT: Change this in production!
SESSION_SECRET=change-this-to-a-random-secret-in-production

# JWT token expiration time
# Default: 7d (7 days)
# Options: 1h, 24h, 7d, 30d
JWT_EXPIRATION=7d

# CORS allowed origins (comma-separated)
# Development: http://localhost:3000
# Production: https://yourdomain.com
# Multiple: http://localhost:3000,https://yourdomain.com
CORS_ORIGIN=http://localhost:3000

# --------------------------------------------
# File Upload Configuration
# --------------------------------------------

# Maximum file upload size in MB
# Default: 10
# Recommended: 10-50 for images
MAX_FILE_SIZE_MB=10

# Allowed file types (comma-separated)
# Default: jpg,jpeg,png,gif
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif

# Upload directory path (relative to backend root)
# Default: uploads
UPLOAD_DIR=uploads

# --------------------------------------------
# API Rate Limiting
# --------------------------------------------

# Enable rate limiting (true/false)
# Recommended: true for production
RATE_LIMIT_ENABLED=true

# Rate limit window in minutes
# Default: 15
RATE_LIMIT_WINDOW_MINUTES=15

# Maximum requests per window
# Default: 100
RATE_LIMIT_MAX_REQUESTS=100

# --------------------------------------------
# Caching Configuration
# --------------------------------------------

# Weather data cache duration in minutes
# Default: 30 (OpenWeatherMap updates every 10 minutes)
WEATHER_CACHE_DURATION=30

# Market prices cache duration in minutes
# Default: 60 (prices update hourly)
MARKET_CACHE_DURATION=60

# --------------------------------------------
# Logging Configuration
# --------------------------------------------

# Enable debug logging (true/false)
# Default: false
# Set to true for detailed logs during development
DEBUG=false

# Log level (error, warn, info, debug)
# Default: info
LOG_LEVEL=info

# Log file path (leave empty to disable file logging)
# Default: logs/app.log
LOG_FILE=logs/app.log

# --------------------------------------------
# Performance & Optimization
# --------------------------------------------

# Enable compression for API responses (true/false)
# Recommended: true for production
COMPRESSION_ENABLED=true

# Database connection pool size
# Default: 10
DB_POOL_SIZE=10

# API request timeout in milliseconds
# Default: 30000 (30 seconds)
API_TIMEOUT=30000

# --------------------------------------------
# Frontend Configuration (for build process)
# --------------------------------------------

# Backend API URL (used by React build)
# Development: http://localhost:4000
# Production: https://api.yourdomain.com
REACT_APP_API_URL=http://localhost:4000

# Enable analytics (true/false)
# REACT_APP_ANALYTICS_ENABLED=false
# REACT_APP_ANALYTICS_ID=

# --------------------------------------------
# Production Deployment Settings
# --------------------------------------------

# SSL/TLS Configuration (for HTTPS)
# SSL_KEY_PATH=/path/to/private-key.pem
# SSL_CERT_PATH=/path/to/certificate.pem
# SSL_CA_PATH=/path/to/ca-bundle.pem

# Process Manager (PM2) Configuration
# PM2_INSTANCES=max
# PM2_EXEC_MODE=cluster

# Health check endpoint
# HEALTH_CHECK_PATH=/health

# --------------------------------------------
# Monitoring & Alerts (OPTIONAL)
# --------------------------------------------

# Sentry DSN for error tracking
# Sign up at: https://sentry.io
# SENTRY_DSN=

# Email notifications for critical errors
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASS=your-app-password
# ALERT_EMAIL=admin@yourdomain.com

# --------------------------------------------
# Feature Flags
# --------------------------------------------

# Enable/disable specific features
FEATURE_DISEASE_DETECTION=true
FEATURE_MARKET_PRICES=true
FEATURE_ENVIRONMENT_MONITORING=true
FEATURE_HARVEST_CALCULATOR=true
FEATURE_CROP_CALENDAR=true
FEATURE_CHATBOT=true

# --------------------------------------------
# Development Tools
# --------------------------------------------

# Enable API documentation (Swagger)
# Default: true in development, false in production
API_DOCS_ENABLED=true

# Enable GraphQL playground
# GRAPHQL_PLAYGROUND_ENABLED=true

# --------------------------------------------
# NOTES FOR PRODUCTION DEPLOYMENT
# --------------------------------------------
#
# REQUIRED CHANGES:
# 1. Set NODE_ENV=production
# 2. Update MONGODB_URI to production database
# 3. Add valid WEATHER_API_KEY
# 4. Change SESSION_SECRET to random string
# 5. Update CORS_ORIGIN to production domain
# 6. Set REACT_APP_API_URL to production API URL
#
# RECOMMENDED:
# 1. Enable rate limiting (RATE_LIMIT_ENABLED=true)
# 2. Enable compression (COMPRESSION_ENABLED=true)
# 3. Set up SSL certificates
# 4. Configure error monitoring (Sentry)
# 5. Set up email alerts
# 6. Disable API_DOCS_ENABLED in production
# 7. Review and adjust cache durations
# 8. Set appropriate LOG_LEVEL (warn or error)
#
# SECURITY CHECKLIST:
# ✓ Changed SESSION_SECRET
# ✓ Updated CORS_ORIGIN
# ✓ Enabled rate limiting
# ✓ Secured MongoDB with authentication
# ✓ Using HTTPS (SSL certificates)
# ✓ Validated all API keys
# ✓ Restricted file upload types
# ✓ Set appropriate file size limits
#
# ============================================
